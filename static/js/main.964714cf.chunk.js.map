{"version":3,"sources":["App.js","modules/EpubView/style.js","modules/EpubView/EpubView.js","modules/ReactReader/style.js","modules/ReactReader/ReactReader.js","index.js","Components.js"],"names":["storage","global","localStorage","GlobalStyle","createGlobalStyle","App","props","toggleFullscreen","setState","fullscreen","state","setTimeout","document","createEvent","initUIEvent","onLocationChanged","location","setItem","onToggleFontSize","nextState","largeText","rendition","themes","fontSize","getRendition","console","log","register","body","p","color","h1","h2","h3","h4","select","handleChangeFile","event","results","length","e","file","type","alert","localFile","target","result","localName","name","getItem","this","as","onChange","onClick","url","epubOptions","flow","manager","locationChanged","Component","epubViewStyles","viewHolder","position","height","width","view","EpubView","onLocationChange","loc","newLocation","start","handleKeyPress","key","nextPage","prevPage","isLoaded","toc","viewerRef","React","createRef","book","initBook","addEventListener","tocChanged","epubInitOptions","destroy","Epub","loaded","navigation","then","initReader","removeEventListener","nextProps","prevProps","display","node","current","renderTo","contained","prev","next","registerEvents","href","handleTextSelected","on","styles","ref","style","loadingView","renderBook","defaultProps","defaultStyles","reactReaderStyles","container","overflow","readerArea","zIndex","backgroundColor","transition","containerExpanded","transform","titleArea","top","left","right","textAlign","reader","marginLeft","marginRight","bottom","swipeWrapper","arrow","outline","border","background","marginTop","padding","fontFamily","cursor","userSelect","appearance","fontWeight","arrowHover","tocBackground","tocArea","overflowY","WebkitOverflowScrolling","tocAreaButton","borderBottom","boxSizing","tocButton","borderRadius","tocButtonExpanded","tocButtonBar","margin","tocButtonBarTop","tocButtonBottom","margintop","Swipeable","children","handlers","useSwipeable","TocItem","setLocation","label","PureComponent","ReactReader","toggleToc","expandedToc","readerRef","onTocChange","map","item","i","Object","assign","title","showToc","swipeable","renderTocToggle","onSwipedRight","onSwipedLeft","trackMouse","renderToc","render","getElementById","Container","styled","div","ReaderContainer","Bar","header","breakpoint","ButtonWrapper","Button","a","img","button","GenericButton","CloseIcon","FontSizeButton"],"mappings":"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","file":"static/js/main.964714cf.chunk.js","sourcesContent":["import React, { Component } from \"react\";\nimport { createGlobalStyle } from \"styled-components\";\nimport FileReaderInput from \"react-file-reader-input\";\nimport { ReactReader } from \"./modules\";\nimport {\n  Container,\n  ReaderContainer,\n  Bar,\n  LogoWrapper,\n  Logo,\n  GenericButton,\n  CloseIcon,\n  FontSizeButton,\n  ButtonWrapper\n} from \"./Components\";\n\nconst storage = global.localStorage || null;\n\nconst DEMO_URL =\n  \"https://gerhardsletten.github.io/react-reader/files/alice.epub\";\nconst DEMO_NAME = \"Alice in wonderland\";\n\nconst GlobalStyle = createGlobalStyle`\n  * {\n    font-family: \"Georgia\", \"serif\", \"Driod Serif\";\n    margin: 0;\n    padding: 0;\n    color: inherit;\n    font-size: inherit;\n    font-weight: 300;\n    line-height: 1.7;\n    word-break: break-word;\n  }\n  html {\n    font-size: 62.5%;\n  }\n  body {\n    margin: 0;\n    padding: 0;\n    min-height: 100vh;\n    font-size: 1.8rem;\n    background: #333;\n    position: absolute;\n    height: 100%;\n    width: 100%;\n    color: #fff;\n\n  }\n`;\n\nclass App extends Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      fullscreen: false,\n      location:\n        storage && storage.getItem(\"epub-location\")\n          ? storage.getItem(\"epub-location\")\n          : 2,\n      localFile: null,\n      localName: null,\n      largeText: false\n    };\n    this.rendition = null;\n  }\n\n  toggleFullscreen = () => {\n    this.setState(\n      {\n        fullscreen: !this.state.fullscreen\n      },\n      () => {\n        setTimeout(() => {\n          const evt = document.createEvent(\"UIEvents\");\n          evt.initUIEvent(\"resize\", true, false, global, 0);\n        }, 1000);\n      }\n    );\n  };\n\n  onLocationChanged = (location) => {\n    this.setState(\n      {\n        location\n      },\n      () => {\n        storage && storage.setItem(\"epub-location\", location);\n      }\n    );\n  };\n\n  onToggleFontSize = () => {\n    const nextState = !this.state.largeText;\n    this.setState(\n      {\n        largeText: nextState\n      },\n      () => {\n        this.rendition.themes.fontSize(nextState ? \"140%\" : \"100%\");\n      }\n    );\n  };\n\n  getRendition = (rendition) => {\n    console.log(\"getRendition callback\", rendition);\n    // Set inital font-size, and add a pointer to rendition for later updates\n    const { largeText } = this.state;\n    this.rendition = rendition;\n    rendition.themes.fontSize(largeText ? \"140%\" : \"100%\");\n    rendition.themes.register(\"custom\", {\n      body: {\n        \"scrollbar-color\": \"#d4aa70 #e4e4e4\",\n        \"scrollbar-width\": \"thin\"\n      },\n      p: {\n        \"line-height\": \"1.7\",\n        color: \"rgba(61,61,78,1)\",\n        \"font-weight\": \"400\",\n        \"overflow-wrap\": \"break-word\"\n        // \"font-family\": \"Droid Serif\"\n      },\n      h1: {\n        // \"font-family\": \"Nunito Sans\",\n        color: \"rgba(46,46,64,1)\",\n        \"font-size\": \"2.25rem\",\n        \"line-height\": \"2.5rem\"\n      },\n      h2: {\n        // \"font-family\": \"Nunito Sans\",\n        color: \"rgba(46,46,64,1)\",\n        \"font-size\": \"2.25rem\",\n        \"line-height\": \"2.5rem\"\n      },\n      h3: {\n        // \"font-family\": \"Nunito Sans\",\n        color: \"rgba(46,46,64,1)\",\n        \"font-size\": \"2.25rem\",\n        \"line-height\": \"2.5rem\"\n      },\n      h4: {\n        // \"font-family\": \"Nunito Sans\",\n        color: \"rgba(46,46,64,1)\",\n        \"font-size\": \"2.25rem\",\n        \"line-height\": \"2.5rem\"\n      }\n      // section: {\n      //   \"padding-right\": \"400px\",\n      //   \"padding-left\": \"400px\"\n      // }\n    });\n\n    // rendition.themes.font(`Droid Serif`);\n    rendition.themes.fontSize(\"20px\");\n    rendition.themes.select(\"custom\");\n  };\n  handleChangeFile = (event, results) => {\n    if (results.length > 0) {\n      const [e, file] = results[0];\n      if (file.type !== \"application/epub+zip\") {\n        return alert(\"Unsupported type\");\n      }\n      this.setState({\n        localFile: e.target.result,\n        localName: file.name,\n        location: null\n      });\n    }\n  };\n  render() {\n    const { fullscreen, location, localFile, localName } = this.state;\n    return (\n      <Container>\n        <GlobalStyle />\n        <Bar>\n          <ButtonWrapper>\n            <FileReaderInput as=\"buffer\" onChange={this.handleChangeFile}>\n              <GenericButton>Upload local epub</GenericButton>\n            </FileReaderInput>\n            <GenericButton onClick={this.toggleFullscreen}>\n              Use full browser window\n              <CloseIcon />\n            </GenericButton>\n          </ButtonWrapper>\n        </Bar>\n        <ReaderContainer fullscreen={fullscreen}>\n          <ReactReader\n            url={localFile || DEMO_URL}\n            epubOptions={{\n              flow: \"scrolled\",\n              manager: \"continuous\"\n            }}\n            location={location}\n            locationChanged={this.onLocationChanged}\n            getRendition={this.getRendition}\n          />\n          <FontSizeButton onClick={this.onToggleFontSize}>\n            Toggle font-size\n          </FontSizeButton>\n        </ReaderContainer>\n      </Container>\n    );\n  }\n}\n\nexport default App;\n","const epubViewStyles = {\n  viewHolder: {\n    position: 'relative',\n    height: '100%',\n    width: '100%'\n  },\n  view: {\n    height: '100%'\n  }\n}\n\nexport default epubViewStyles\n","import React, { Component } from 'react'\nimport PropTypes from 'prop-types'\nimport Epub from 'epubjs/lib/index'\nimport defaultStyles from './style'\n\n// MTL removed - line does not seem like a requirement any more (and was causing an error)\n// global.ePub = Epub; // Fix for v3 branch of epub.js -> needs ePub to by a global var\n\nclass EpubView extends Component {\n  constructor(props) {\n    super(props)\n    this.state = {\n      isLoaded: false,\n      toc: []\n    }\n    this.viewerRef = React.createRef()\n    this.location = props.location\n    this.book = this.rendition = this.prevPage = this.nextPage = null\n  }\n\n  componentDidMount() {\n    this.initBook(true)\n    document.addEventListener('keyup', this.handleKeyPress, false)\n  }\n\n  initBook() {\n    const { url, tocChanged, epubInitOptions } = this.props\n    if (this.book) {\n      this.book.destroy()\n    }\n    this.book = new Epub(url, epubInitOptions)\n    this.book.loaded.navigation.then(({ toc }) => {\n      this.setState(\n        {\n          isLoaded: true,\n          toc: toc\n        },\n        () => {\n          tocChanged && tocChanged(toc)\n          this.initReader()\n        }\n      )\n    })\n  }\n\n  componentWillUnmount() {\n    this.book = this.rendition = this.prevPage = this.nextPage = null\n    document.removeEventListener('keyup', this.handleKeyPress, false)\n  }\n\n  shouldComponentUpdate(nextProps) {\n    return (\n      !this.state.isLoaded ||\n      nextProps.location !== this.props.location ||\n      nextProps.location !== this.props.location\n    )\n  }\n\n  componentDidUpdate(prevProps) {\n    if (\n      prevProps.location !== this.props.location &&\n      this.location !== this.props.location\n    ) {\n      this.rendition.display(this.props.location)\n    }\n    if (prevProps.url !== this.props.url) {\n      this.initBook()\n    }\n  }\n\n  initReader() {\n    const { toc } = this.state\n    const { location, epubOptions, getRendition } = this.props\n    const node = this.viewerRef.current\n    this.rendition = this.book.renderTo(node, {\n      contained: true,\n      width: '100%',\n      height: '100%',\n      ...epubOptions\n    })\n\n    this.prevPage = () => {\n      this.rendition.prev()\n    }\n    this.nextPage = () => {\n      this.rendition.next()\n    }\n    this.registerEvents()\n    getRendition && getRendition(this.rendition)\n\n    if (typeof location === 'string' || typeof location === 'number') {\n      this.rendition.display(location)\n    } else if (toc.length > 0 && toc[0].href) {\n      this.rendition.display(toc[0].href)\n    } else {\n      this.rendition.display()\n    }\n  }\n\n  registerEvents() {\n    const { handleKeyPress, handleTextSelected } = this.props\n    this.rendition.on('locationChanged', this.onLocationChange)\n    this.rendition.on('keyup', handleKeyPress || this.handleKeyPress)\n    if (handleTextSelected) {\n      this.rendition.on('selected', handleTextSelected)\n    }\n  }\n\n  onLocationChange = loc => {\n    const { location, locationChanged } = this.props\n    const newLocation = loc && loc.start\n    if (location !== newLocation) {\n      this.location = newLocation\n      locationChanged && locationChanged(newLocation)\n    }\n  }\n\n  renderBook() {\n    const { styles } = this.props\n    return <div ref={this.viewerRef} style={styles.view} />\n  }\n\n  handleKeyPress = ({ key }) => {\n    key && key === 'ArrowRight' && this.nextPage()\n    key && key === 'ArrowLeft' && this.prevPage()\n  }\n\n  render() {\n    const { isLoaded } = this.state\n    const { loadingView, styles } = this.props\n    return (\n      <div style={styles.viewHolder}>\n        {(isLoaded && this.renderBook()) || loadingView}\n      </div>\n    )\n  }\n}\n\nEpubView.defaultProps = {\n  loadingView: null,\n  locationChanged: null,\n  tocChanged: null,\n  styles: defaultStyles,\n  epubOptions: {},\n  epubInitOptions: {}\n}\n\nEpubView.propTypes = {\n  url: PropTypes.oneOfType([\n    PropTypes.string,\n    PropTypes.instanceOf(ArrayBuffer)\n  ]),\n  loadingView: PropTypes.element,\n  location: PropTypes.oneOfType([PropTypes.string, PropTypes.number]),\n  locationChanged: PropTypes.func,\n  tocChanged: PropTypes.func,\n  styles: PropTypes.object,\n  epubInitOptions: PropTypes.object,\n  epubOptions: PropTypes.object,\n  getRendition: PropTypes.func,\n  handleKeyPress: PropTypes.func,\n  handleTextSelected: PropTypes.func\n}\n\nexport default EpubView\n","const reactReaderStyles = {\n  container: {\n    overflow: \"hidden\",\n\n    height: \"100%\"\n  },\n  readerArea: {\n    position: \"relative\",\n\n    zIndex: 1,\n    height: \"100%\",\n    width: \"100%\",\n    // paddingLeft:'400px',\n    // paddingRight:'400px',\n    backgroundColor: \"#fff\",\n    transition: \"all .3s ease\"\n  },\n  containerExpanded: {\n    transform: \"translateX(256px)\"\n  },\n  titleArea: {\n    position: \"absolute\",\n    top: 20,\n    left: 50,\n    right: 50,\n    textAlign: \"center\",\n    color: \"#999\"\n  },\n  reader: {\n    position: \"absolute\",\n    top: 50,\n    left: 50,\n    marginLeft: \"400px\",\n    marginRight: \"400px\",\n    bottom: 20,\n    right: 50\n  },\n  swipeWrapper: {\n    position: \"absolute\",\n    top: 0,\n    left: 0,\n    bottom: 0,\n    right: 0,\n    zIndex: 200\n  },\n  prev: {\n    left: 1\n  },\n  next: {\n    right: 1\n  },\n  arrow: {\n    outline: \"none\",\n    border: \"none\",\n    background: \"none\",\n    position: \"absolute\",\n    top: \"50%\",\n    marginTop: -32,\n    fontSize: 64,\n    padding: \"0 10px\",\n    color: \"#E2E2E2\",\n    fontFamily: \"arial, sans-serif\",\n    cursor: \"pointer\",\n    userSelect: \"none\",\n    appearance: \"none\",\n    fontWeight: \"normal\"\n  },\n  arrowHover: {\n    color: \"#777\"\n  },\n  tocBackground: {\n    position: \"absolute\",\n    left: 256,\n    top: 0,\n    bottom: 0,\n    right: 0,\n    zIndex: 1\n  },\n  tocArea: {\n    position: \"absolute\",\n    left: 0,\n    top: 0,\n    bottom: 0,\n    zIndex: 0,\n    width: 256,\n    overflowY: \"auto\",\n    WebkitOverflowScrolling: \"touch\",\n    background: \"#f2f2f2\",\n    padding: \"10px 0\"\n  },\n  tocAreaButton: {\n    userSelect: \"none\",\n    appearance: \"none\",\n    background: \"none\",\n    border: \"none\",\n    display: \"block\",\n    fontFamily: \"sans-serif\",\n    width: \"100%\",\n    fontSize: \".9em\",\n    textAlign: \"left\",\n    padding: \".9em 1em\",\n    borderBottom: \"1px solid #ddd\",\n    color: \"#aaa\",\n    boxSizing: \"border-box\",\n    outline: \"none\",\n    cursor: \"pointer\"\n  },\n  tocButton: {\n    background: \"none\",\n    border: \"none\",\n    width: 32,\n    height: 32,\n    position: \"absolute\",\n    top: 10,\n    left: 10,\n    borderRadius: 2,\n    outline: \"none\",\n    cursor: \"pointer\"\n  },\n  tocButtonExpanded: {\n    background: \"#f2f2f2\"\n  },\n  tocButtonBar: {\n    position: \"absolute\",\n    width: \"60%\",\n    background: \"#ccc\",\n    height: 2,\n    left: \"50%\",\n    margin: \"-1px -30%\",\n    top: \"50%\",\n    transition: \"all .5s ease\"\n  },\n  tocButtonBarTop: {\n    top: \"35%\"\n  },\n  tocButtonBottom: {\n    top: \"66%\"\n  },\n  loadingView: {\n    position: \"absolute\",\n    top: \"50%\",\n    left: \"10%\",\n    right: \"10%\",\n    color: \"#ccc\",\n    textAlign: \"center\",\n    margintop: \"-.5em\"\n  }\n};\n\nexport default reactReaderStyles;\n","import React, { PureComponent } from 'react'\nimport PropTypes from 'prop-types'\nimport { useSwipeable } from 'react-swipeable'\nimport { EpubView } from '..'\nimport defaultStyles from './style'\n\nconst Swipeable = ({ children, ...props }) => {\n  const handlers = useSwipeable(props)\n  return <div {...handlers}>{children}</div>\n}\n\nclass TocItem extends PureComponent {\n  setLocation = () => {\n    this.props.setLocation(this.props.href)\n  }\n  render() {\n    const { label, styles } = this.props\n    return (\n      <button onClick={this.setLocation} style={styles}>\n        {label}\n      </button>\n    )\n  }\n}\n\nTocItem.propTypes = {\n  label: PropTypes.string,\n  href: PropTypes.string,\n  setLocation: PropTypes.func,\n  styles: PropTypes.object\n}\n\nclass ReactReader extends PureComponent {\n  constructor(props) {\n    super(props)\n    this.readerRef = React.createRef()\n    this.state = {\n      expandedToc: false,\n      toc: false\n    }\n  }\n  toggleToc = () => {\n    this.setState({\n      expandedToc: !this.state.expandedToc\n    })\n  }\n\n  next = () => {\n    const node = this.readerRef.current\n    node.nextPage()\n  }\n\n  prev = () => {\n    const node = this.readerRef.current\n    node.prevPage()\n  }\n\n  onTocChange = toc => {\n    const { tocChanged } = this.props\n    this.setState(\n      {\n        toc: toc\n      },\n      () => tocChanged && tocChanged(toc)\n    )\n  }\n\n  renderToc() {\n    const { toc, expandedToc } = this.state\n    const { styles } = this.props\n    return (\n      <div>\n        <div style={styles.tocArea}>\n          <div style={styles.toc}>\n            {toc.map((item, i) => (\n              <TocItem\n                {...item}\n                key={i}\n                setLocation={this.setLocation}\n                styles={styles.tocAreaButton}\n              />\n            ))}\n          </div>\n        </div>\n        {expandedToc && (\n          <div style={styles.tocBackground} onClick={this.toggleToc} />\n        )}\n      </div>\n    )\n  }\n\n  setLocation = loc => {\n    const { locationChanged } = this.props\n    this.setState(\n      {\n        expandedToc: false\n      },\n      () => locationChanged && locationChanged(loc)\n    )\n  }\n\n  renderTocToggle() {\n    const { expandedToc } = this.state\n    const { styles } = this.props\n    return (\n      <button\n        style={Object.assign(\n          {},\n          styles.tocButton,\n          expandedToc ? styles.tocButtonExpanded : {}\n        )}\n        onClick={this.toggleToc}\n      >\n        <span\n          style={Object.assign({}, styles.tocButtonBar, styles.tocButtonBarTop)}\n        />\n        <span\n          style={Object.assign({}, styles.tocButtonBar, styles.tocButtonBottom)}\n        />\n      </button>\n    )\n  }\n\n  render() {\n    const {\n      title,\n      showToc,\n      loadingView,\n      styles,\n      locationChanged,\n      swipeable,\n      epubViewStyles,\n      ...props\n    } = this.props\n    const { toc, expandedToc } = this.state\n    return (\n      <div style={styles.container}>\n        <div\n          style={Object.assign(\n            {},\n            styles.readerArea,\n            expandedToc ? styles.containerExpanded : {}\n          )}\n        >\n          {showToc && this.renderTocToggle()}\n          <div style={styles.titleArea}>{title}</div>\n          <Swipeable\n            onSwipedRight={this.prev}\n            onSwipedLeft={this.next}\n            trackMouse\n          >\n            <div style={styles.reader}>\n              <EpubView\n                ref={this.readerRef}\n                loadingView={loadingView}\n                styles={epubViewStyles}\n                {...props}\n                tocChanged={this.onTocChange}\n                locationChanged={locationChanged}\n              />\n              {swipeable && <div style={styles.swipeWrapper} />}\n            </div>\n          </Swipeable>\n          <button\n            style={Object.assign({}, styles.arrow, styles.prev)}\n            onClick={this.prev}\n          >\n            ‹\n          </button>\n          <button\n            style={Object.assign({}, styles.arrow, styles.next)}\n            onClick={this.next}\n          >\n            ›\n          </button>\n        </div>\n        {showToc && toc && this.renderToc()}\n      </div>\n    )\n  }\n}\n\nReactReader.defaultProps = {\n  loadingView: <div style={defaultStyles.loadingView}>Loading…</div>,\n  locationChanged: null,\n  tocChanged: null,\n  showToc: true,\n  styles: defaultStyles\n}\n\nReactReader.propTypes = {\n  title: PropTypes.string,\n  loadingView: PropTypes.element,\n  showToc: PropTypes.bool,\n  locationChanged: PropTypes.func,\n  tocChanged: PropTypes.func,\n  styles: PropTypes.object,\n  epubViewStyles: PropTypes.object,\n  swipeable: PropTypes.bool\n}\n\nexport default ReactReader\n","import React from 'react'\nimport { render } from 'react-dom'\nimport App from './App'\n\nrender(<App />, document.getElementById('root'))\n","import styled from \"styled-components\";\nimport breakpoint from \"styled-components-breakpoint\";\n\nexport const Container = styled.div`\n  position: relative;\n  width: 100%;\n  height: 100%;\n  min-height: 100vh;\n  background: linear-gradient(to bottom, #f2f2f2 0%, #333 100%);\n  overflow: hidden;\n`;\nexport const ReaderContainer = styled.div`\n  font-size: 18px;\n  position: absolute;\n  top: ${(props) => (props.fullscreen ? 0 : 72)}px;\n  left: ${(props) => (props.fullscreen ? 0 : 1)}rem;\n  right: ${(props) => (props.fullscreen ? 0 : 1)}rem;\n  bottom: ${(props) => (props.fullscreen ? 0 : 1)}rem;\n  transition: all 0.6s ease;\n  ${(props) => !props.fullscreen && \"0 0 5px rgba(0,0,0,.3);\"};\n`;\nexport const Bar = styled.header`\n  position: absolute;\n  top: 20px;\n  left: 10px;\n  right: 20px;\n  display: flex;\n  align-items: flex-end;\n  justify-content: right;\n\n  ${breakpoint(\"tablet\")`\n    display: flex;\n    align-items: flex-end;\n  `};\n`;\nexport const ButtonWrapper = styled.div`\n  ${breakpoint(\"mobile\")`\n    display: flex;\n    justify-content: center;\n    align-items: baseline;\n    padding-top: 0.5rem;\n  `};\n`;\nexport const LogoWrapper = styled.a`\n  ${breakpoint(\"tablet\")`\n    margin-right: auto;\n  `};\n`;\nexport const Logo = styled.img`\n  width: 250px;\n  height: auto;\n  display: block;\n  margin: 0 auto 0px;\n  ${breakpoint(\"tablet\")`\n    width: 330px;\n    height: 104px;\n    display: inline-block;\n    margin-left: 2px;\n  `};\n`;\nconst Button = styled.button`\n  font-family: inherit;\n  font-size: inherit;\n  border: none;\n  outline: none;\n  cursor: pointer;\n  user-select: none;\n  appearance: none;\n  background: none;\n`;\nexport const GenericButton = styled(Button)`\n  color: #808080;\n  font-size: 12px;\n  display: inline-block;\n  margin-left: 1rem;\n  ${breakpoint(\"tablet\")`\n    font-size: 16px;\n    \n  `};\n`;\nexport const CloseIcon = styled.i`\n  vertical-align: middle;\n  display: inline-block;\n  width: 2rem;\n  height: 2rem;\n  background: #666;\n  margin-left: 5px;\n  border-radius: 50%;\n  position: relative;\n  transform: rotate(45deg);\n  &:before,\n  &:after {\n    content: \"\";\n    position: absolute;\n    top: 50%;\n    left: 50%;\n    width: 60%;\n    height: 2px;\n    background: #fff;\n    margin-left: -30%;\n    margin-top: -1px;\n    border-radius: 1px;\n  }\n  &:after {\n    transform: rotate(-90deg);\n  }\n`;\nexport const FontSizeButton = styled(Button)`\n  position: fixed;\n  bottom: 1.5rem;\n  right: 1.5rem;\n  z-index: 10;\n  background: #eee;\n  border-radius: 2px;\n  padding: 0.5rem;\n`;\n"],"sourceRoot":""}