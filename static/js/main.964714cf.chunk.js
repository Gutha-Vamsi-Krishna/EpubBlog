(this.webpackJsonpepubblog=this.webpackJsonpepubblog||[]).push([[0],{112:function(e,t,n){"use strict";(function(e){var o,i=n(119),r=n(23),a=n(24),c=n(26),s=n(25),l=n(6),d=n(0),u=n(5),h=n(113),p=n.n(h),b=n(120),f=n(18),g=n(1),j=e.localStorage||null,v=Object(u.a)(o||(o=Object(l.a)(['\n  * {\n    font-family: "Georgia", "serif", "Driod Serif";\n    margin: 0;\n    padding: 0;\n    color: inherit;\n    font-size: inherit;\n    font-weight: 300;\n    line-height: 1.7;\n    word-break: break-word;\n  }\n  html {\n    font-size: 62.5%;\n  }\n  body {\n    margin: 0;\n    padding: 0;\n    min-height: 100vh;\n    font-size: 1.8rem;\n    background: #333;\n    position: absolute;\n    height: 100%;\n    width: 100%;\n    color: #fff;\n\n  }\n']))),x=function(t){Object(c.a)(o,t);var n=Object(s.a)(o);function o(t){var a;return Object(r.a)(this,o),(a=n.call(this,t)).toggleFullscreen=function(){a.setState({fullscreen:!a.state.fullscreen},(function(){setTimeout((function(){document.createEvent("UIEvents").initUIEvent("resize",!0,!1,e,0)}),1e3)}))},a.onLocationChanged=function(e){a.setState({location:e},(function(){j&&j.setItem("epub-location",e)}))},a.onToggleFontSize=function(){var e=!a.state.largeText;a.setState({largeText:e},(function(){a.rendition.themes.fontSize(e?"140%":"100%")}))},a.getRendition=function(e){console.log("getRendition callback",e);var t=a.state.largeText;a.rendition=e,e.themes.fontSize(t?"140%":"100%"),e.themes.register("custom",{body:{"scrollbar-color":"#d4aa70 #e4e4e4","scrollbar-width":"thin"},p:{"line-height":"1.7",color:"rgba(61,61,78,1)","font-weight":"400","overflow-wrap":"break-word"},h1:{color:"rgba(46,46,64,1)","font-size":"2.25rem","line-height":"2.5rem"},h2:{color:"rgba(46,46,64,1)","font-size":"2.25rem","line-height":"2.5rem"},h3:{color:"rgba(46,46,64,1)","font-size":"2.25rem","line-height":"2.5rem"},h4:{color:"rgba(46,46,64,1)","font-size":"2.25rem","line-height":"2.5rem"}}),e.themes.fontSize("20px"),e.themes.select("custom")},a.handleChangeFile=function(e,t){if(t.length>0){var n=Object(i.a)(t[0],2),o=n[0],r=n[1];if("application/epub+zip"!==r.type)return alert("Unsupported type");a.setState({localFile:o.target.result,localName:r.name,location:null})}},a.state={fullscreen:!1,location:j&&j.getItem("epub-location")?j.getItem("epub-location"):2,localFile:null,localName:null,largeText:!1},a.rendition=null,a}return Object(a.a)(o,[{key:"render",value:function(){var e=this.state,t=e.fullscreen,n=e.location,o=e.localFile;e.localName;return Object(g.jsxs)(f.d,{children:[Object(g.jsx)(v,{}),Object(g.jsx)(f.a,{children:Object(g.jsxs)(f.b,{children:[Object(g.jsx)(p.a,{as:"buffer",onChange:this.handleChangeFile,children:Object(g.jsx)(f.f,{children:"Upload local epub"})}),Object(g.jsxs)(f.f,{onClick:this.toggleFullscreen,children:["Use full browser window",Object(g.jsx)(f.c,{})]})]})}),Object(g.jsxs)(f.g,{fullscreen:t,children:[Object(g.jsx)(b.b,{url:o||"https://gerhardsletten.github.io/react-reader/files/alice.epub",epubOptions:{flow:"scrolled",manager:"continuous"},location:n,locationChanged:this.onLocationChanged,getRendition:this.getRendition}),Object(g.jsx)(f.e,{onClick:this.onToggleFontSize,children:"Toggle font-size"})]})]})}}]),o}(d.Component);t.a=x}).call(this,n(16))},120:function(e,t,n){"use strict";n.d(t,"a",(function(){return f})),n.d(t,"b",(function(){return w}));var o=n(17),i=n(23),r=n(24),a=n(26),c=n(25),s=n(0),l=n.n(s),d=n(114),u=n.n(d),h={viewHolder:{position:"relative",height:"100%",width:"100%"},view:{height:"100%"}},p=n(1),b=function(e){Object(a.a)(n,e);var t=Object(c.a)(n);function n(e){var o;return Object(i.a)(this,n),(o=t.call(this,e)).onLocationChange=function(e){var t=o.props,n=t.location,i=t.locationChanged,r=e&&e.start;n!==r&&(o.location=r,i&&i(r))},o.handleKeyPress=function(e){var t=e.key;t&&"ArrowRight"===t&&o.nextPage(),t&&"ArrowLeft"===t&&o.prevPage()},o.state={isLoaded:!1,toc:[]},o.viewerRef=l.a.createRef(),o.location=e.location,o.book=o.rendition=o.prevPage=o.nextPage=null,o}return Object(r.a)(n,[{key:"componentDidMount",value:function(){this.initBook(!0),document.addEventListener("keyup",this.handleKeyPress,!1)}},{key:"initBook",value:function(){var e=this,t=this.props,n=t.url,o=t.tocChanged,i=t.epubInitOptions;this.book&&this.book.destroy(),this.book=new u.a(n,i),this.book.loaded.navigation.then((function(t){var n=t.toc;e.setState({isLoaded:!0,toc:n},(function(){o&&o(n),e.initReader()}))}))}},{key:"componentWillUnmount",value:function(){this.book=this.rendition=this.prevPage=this.nextPage=null,document.removeEventListener("keyup",this.handleKeyPress,!1)}},{key:"shouldComponentUpdate",value:function(e){return!this.state.isLoaded||e.location!==this.props.location||e.location!==this.props.location}},{key:"componentDidUpdate",value:function(e){e.location!==this.props.location&&this.location!==this.props.location&&this.rendition.display(this.props.location),e.url!==this.props.url&&this.initBook()}},{key:"initReader",value:function(){var e=this,t=this.state.toc,n=this.props,i=n.location,r=n.epubOptions,a=n.getRendition,c=this.viewerRef.current;this.rendition=this.book.renderTo(c,Object(o.a)({contained:!0,width:"100%",height:"100%"},r)),this.prevPage=function(){e.rendition.prev()},this.nextPage=function(){e.rendition.next()},this.registerEvents(),a&&a(this.rendition),"string"===typeof i||"number"===typeof i?this.rendition.display(i):t.length>0&&t[0].href?this.rendition.display(t[0].href):this.rendition.display()}},{key:"registerEvents",value:function(){var e=this.props,t=e.handleKeyPress,n=e.handleTextSelected;this.rendition.on("locationChanged",this.onLocationChange),this.rendition.on("keyup",t||this.handleKeyPress),n&&this.rendition.on("selected",n)}},{key:"renderBook",value:function(){var e=this.props.styles;return Object(p.jsx)("div",{ref:this.viewerRef,style:e.view})}},{key:"render",value:function(){var e=this.state.isLoaded,t=this.props,n=t.loadingView,o=t.styles;return Object(p.jsx)("div",{style:o.viewHolder,children:e&&this.renderBook()||n})}}]),n}(s.Component);b.defaultProps={loadingView:null,locationChanged:null,tocChanged:null,styles:h,epubOptions:{},epubInitOptions:{}};var f=b,g=n(77),j=n(115),v={container:{overflow:"hidden",height:"100%"},readerArea:{position:"relative",zIndex:1,height:"100%",width:"100%",backgroundColor:"#fff",transition:"all .3s ease"},containerExpanded:{transform:"translateX(256px)"},titleArea:{position:"absolute",top:20,left:50,right:50,textAlign:"center",color:"#999"},reader:{position:"absolute",top:50,left:50,marginLeft:"400px",marginRight:"400px",bottom:20,right:50},swipeWrapper:{position:"absolute",top:0,left:0,bottom:0,right:0,zIndex:200},prev:{left:1},next:{right:1},arrow:{outline:"none",border:"none",background:"none",position:"absolute",top:"50%",marginTop:-32,fontSize:64,padding:"0 10px",color:"#E2E2E2",fontFamily:"arial, sans-serif",cursor:"pointer",userSelect:"none",appearance:"none",fontWeight:"normal"},arrowHover:{color:"#777"},tocBackground:{position:"absolute",left:256,top:0,bottom:0,right:0,zIndex:1},tocArea:{position:"absolute",left:0,top:0,bottom:0,zIndex:0,width:256,overflowY:"auto",WebkitOverflowScrolling:"touch",background:"#f2f2f2",padding:"10px 0"},tocAreaButton:{userSelect:"none",appearance:"none",background:"none",border:"none",display:"block",fontFamily:"sans-serif",width:"100%",fontSize:".9em",textAlign:"left",padding:".9em 1em",borderBottom:"1px solid #ddd",color:"#aaa",boxSizing:"border-box",outline:"none",cursor:"pointer"},tocButton:{background:"none",border:"none",width:32,height:32,position:"absolute",top:10,left:10,borderRadius:2,outline:"none",cursor:"pointer"},tocButtonExpanded:{background:"#f2f2f2"},tocButtonBar:{position:"absolute",width:"60%",background:"#ccc",height:2,left:"50%",margin:"-1px -30%",top:"50%",transition:"all .5s ease"},tocButtonBarTop:{top:"35%"},tocButtonBottom:{top:"66%"},loadingView:{position:"absolute",top:"50%",left:"10%",right:"10%",color:"#ccc",textAlign:"center",margintop:"-.5em"}},x=["children"],m=["title","showToc","loadingView","styles","locationChanged","swipeable","epubViewStyles"],O=function(e){var t=e.children,n=Object(g.a)(e,x),i=Object(j.useSwipeable)(n);return Object(p.jsx)("div",Object(o.a)(Object(o.a)({},i),{},{children:t}))},y=function(e){Object(a.a)(n,e);var t=Object(c.a)(n);function n(){var e;Object(i.a)(this,n);for(var o=arguments.length,r=new Array(o),a=0;a<o;a++)r[a]=arguments[a];return(e=t.call.apply(t,[this].concat(r))).setLocation=function(){e.props.setLocation(e.props.href)},e}return Object(r.a)(n,[{key:"render",value:function(){var e=this.props,t=e.label,n=e.styles;return Object(p.jsx)("button",{onClick:this.setLocation,style:n,children:t})}}]),n}(s.PureComponent),k=function(e){Object(a.a)(n,e);var t=Object(c.a)(n);function n(e){var o;return Object(i.a)(this,n),(o=t.call(this,e)).toggleToc=function(){o.setState({expandedToc:!o.state.expandedToc})},o.next=function(){o.readerRef.current.nextPage()},o.prev=function(){o.readerRef.current.prevPage()},o.onTocChange=function(e){var t=o.props.tocChanged;o.setState({toc:e},(function(){return t&&t(e)}))},o.setLocation=function(e){var t=o.props.locationChanged;o.setState({expandedToc:!1},(function(){return t&&t(e)}))},o.readerRef=l.a.createRef(),o.state={expandedToc:!1,toc:!1},o}return Object(r.a)(n,[{key:"renderToc",value:function(){var e=this,t=this.state,n=t.toc,i=t.expandedToc,r=this.props.styles;return Object(p.jsxs)("div",{children:[Object(p.jsx)("div",{style:r.tocArea,children:Object(p.jsx)("div",{style:r.toc,children:n.map((function(t,n){return Object(s.createElement)(y,Object(o.a)(Object(o.a)({},t),{},{key:n,setLocation:e.setLocation,styles:r.tocAreaButton}))}))})}),i&&Object(p.jsx)("div",{style:r.tocBackground,onClick:this.toggleToc})]})}},{key:"renderTocToggle",value:function(){var e=this.state.expandedToc,t=this.props.styles;return Object(p.jsxs)("button",{style:Object.assign({},t.tocButton,e?t.tocButtonExpanded:{}),onClick:this.toggleToc,children:[Object(p.jsx)("span",{style:Object.assign({},t.tocButtonBar,t.tocButtonBarTop)}),Object(p.jsx)("span",{style:Object.assign({},t.tocButtonBar,t.tocButtonBottom)})]})}},{key:"render",value:function(){var e=this.props,t=e.title,n=e.showToc,i=e.loadingView,r=e.styles,a=e.locationChanged,c=e.swipeable,s=e.epubViewStyles,l=Object(g.a)(e,m),d=this.state,u=d.toc,h=d.expandedToc;return Object(p.jsxs)("div",{style:r.container,children:[Object(p.jsxs)("div",{style:Object.assign({},r.readerArea,h?r.containerExpanded:{}),children:[n&&this.renderTocToggle(),Object(p.jsx)("div",{style:r.titleArea,children:t}),Object(p.jsx)(O,{onSwipedRight:this.prev,onSwipedLeft:this.next,trackMouse:!0,children:Object(p.jsxs)("div",{style:r.reader,children:[Object(p.jsx)(f,Object(o.a)(Object(o.a)({ref:this.readerRef,loadingView:i,styles:s},l),{},{tocChanged:this.onTocChange,locationChanged:a})),c&&Object(p.jsx)("div",{style:r.swipeWrapper})]})}),Object(p.jsx)("button",{style:Object.assign({},r.arrow,r.prev),onClick:this.prev,children:"\u2039"}),Object(p.jsx)("button",{style:Object.assign({},r.arrow,r.next),onClick:this.next,children:"\u203a"})]}),n&&u&&this.renderToc()]})}}]),n}(s.PureComponent);k.defaultProps={loadingView:Object(p.jsx)("div",{style:v.loadingView,children:"Loading\u2026"}),locationChanged:null,tocChanged:null,showToc:!0,styles:v};var w=k},121:function(e,t,n){"use strict";n.r(t);n(0);var o=n(74),i=n(112),r=n(1);Object(o.render)(Object(r.jsx)(i.a,{}),document.getElementById("root"))},18:function(e,t,n){"use strict";n.d(t,"d",(function(){return O})),n.d(t,"g",(function(){return y})),n.d(t,"a",(function(){return k})),n.d(t,"b",(function(){return w})),n.d(t,"f",(function(){return T})),n.d(t,"c",(function(){return B})),n.d(t,"e",(function(){return z}));var o,i,r,a,c,s,l,d,u,h,p,b,f,g,j,v=n(6),x=n(5),m=n(32),O=x.c.div(o||(o=Object(v.a)(["\n  position: relative;\n  width: 100%;\n  height: 100%;\n  min-height: 100vh;\n  background: linear-gradient(to bottom, #f2f2f2 0%, #333 100%);\n  overflow: hidden;\n"]))),y=x.c.div(i||(i=Object(v.a)(["\n  font-size: 18px;\n  position: absolute;\n  top: ","px;\n  left: ","rem;\n  right: ","rem;\n  bottom: ","rem;\n  transition: all 0.6s ease;\n  ",";\n"])),(function(e){return e.fullscreen?0:72}),(function(e){return e.fullscreen?0:1}),(function(e){return e.fullscreen?0:1}),(function(e){return e.fullscreen?0:1}),(function(e){return!e.fullscreen&&"0 0 5px rgba(0,0,0,.3);"})),k=x.c.header(r||(r=Object(v.a)(["\n  position: absolute;\n  top: 20px;\n  left: 10px;\n  right: 20px;\n  display: flex;\n  align-items: flex-end;\n  justify-content: right;\n\n  ",";\n"])),Object(m.a)("tablet")(a||(a=Object(v.a)(["\n    display: flex;\n    align-items: flex-end;\n  "])))),w=x.c.div(c||(c=Object(v.a)(["\n  ",";\n"])),Object(m.a)("mobile")(s||(s=Object(v.a)(["\n    display: flex;\n    justify-content: center;\n    align-items: baseline;\n    padding-top: 0.5rem;\n  "])))),C=(x.c.a(l||(l=Object(v.a)(["\n  ",";\n"])),Object(m.a)("tablet")(d||(d=Object(v.a)(["\n    margin-right: auto;\n  "])))),x.c.img(u||(u=Object(v.a)(["\n  width: 250px;\n  height: auto;\n  display: block;\n  margin: 0 auto 0px;\n  ",";\n"])),Object(m.a)("tablet")(h||(h=Object(v.a)(["\n    width: 330px;\n    height: 104px;\n    display: inline-block;\n    margin-left: 2px;\n  "])))),x.c.button(p||(p=Object(v.a)(["\n  font-family: inherit;\n  font-size: inherit;\n  border: none;\n  outline: none;\n  cursor: pointer;\n  user-select: none;\n  appearance: none;\n  background: none;\n"])))),T=Object(x.c)(C)(b||(b=Object(v.a)(["\n  color: #808080;\n  font-size: 12px;\n  display: inline-block;\n  margin-left: 1rem;\n  ",";\n"])),Object(m.a)("tablet")(f||(f=Object(v.a)(["\n    font-size: 16px;\n    \n  "])))),B=x.c.i(g||(g=Object(v.a)(['\n  vertical-align: middle;\n  display: inline-block;\n  width: 2rem;\n  height: 2rem;\n  background: #666;\n  margin-left: 5px;\n  border-radius: 50%;\n  position: relative;\n  transform: rotate(45deg);\n  &:before,\n  &:after {\n    content: "";\n    position: absolute;\n    top: 50%;\n    left: 50%;\n    width: 60%;\n    height: 2px;\n    background: #fff;\n    margin-left: -30%;\n    margin-top: -1px;\n    border-radius: 1px;\n  }\n  &:after {\n    transform: rotate(-90deg);\n  }\n']))),z=Object(x.c)(C)(j||(j=Object(v.a)(["\n  position: fixed;\n  bottom: 1.5rem;\n  right: 1.5rem;\n  z-index: 10;\n  background: #eee;\n  border-radius: 2px;\n  padding: 0.5rem;\n"])))}},[[121,1,2]]]);
//# sourceMappingURL=main.964714cf.chunk.js.map